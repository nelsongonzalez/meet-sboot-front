<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<!-- <link rel="import" href="../bower_components/iron-icons/av-icons.html">
     <link rel="import" href="../bower_components/iron-icons/communication-icons.html"> -->
<link rel="import" href="../bower_components/iron-icons/device-icons.html">
<link rel="import" href="../bower_components/iron-icons/editor-icons.html">
<!-- <link rel="import" href="../bower_components/iron-icons/hardware-icons.html">
     <link rel="import" href="../bower_components/iron-icons/image-icons.html">
     <link rel="import" href="../bower_components/iron-icons/maps-icons.html">
     <link rel="import" href="../bower_components/iron-icons/notification-icons.html">
     <link rel="import" href="../bower_components/iron-icons/social-icons.html">
     <link rel="import" href="../bower_components/iron-icons/places-icons.html"> -->
<link rel="import" href="../bower_components/paper-fab/paper-fab.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-card/paper-card.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/paper-item/paper-item-body.html">
<link rel="import" href="../bower_components/polymerfire/firebase-query.html">
<link rel="import" href="shared-styles.html">

<dom-module id="my-events">
  <template>
    <style include="shared-styles">
      :host {
        display: block;

        padding: 10px;

      }

     paper-fab {
       position: fixed;
       bottom: 16px;
       right: 16px;
     }

     paper-card {
       width: 100%;
     }

     .spacer {
       display: block;
       height: 8px;
     }
    </style>

    <firebase-query
        id="query"
        app-name="meet-apuestas"
        path="/events"
        data="{{data}}">
    </firebase-query>

    <div class="card">
      <template is="dom-repeat" items="[[data]]" as="result">
        <paper-card heading="[[result.teamA]] vs [[result.teamB]]">
          <div class="card-content">
            <div><iron-icon icon="editor:attach-money"></iron-icon>[[result.amount]] al marcador</div>
            <iron-icon icon="icons:date-range"></iron-icon>[[result.date]],
            <iron-icon icon="device:access-time"></iron-icon>[[result.time]]
          </div>
          <div class="card-actions">
            <paper-button on-tap="_navToNewBet" data-event$="[[result.$key]]">Apostar</paper-button>
          </div>
        </paper-card>
        <span class="spacer"></span>
      </template>
    </div>

    <paper-fab icon="icons:add" on-tap="_navToNewEvent"></paper-fab>
  </template>

  <script>
    Polymer({
      is: 'my-events',

      _navToNewEvent: function() {
        window.history.pushState({}, null, '/new-event');
        window.dispatchEvent(new CustomEvent('location-changed'));
      },

      _navToNewBet: function(event) {
        window.history.pushState({}, null, '/new-bet/' + event.target.dataset.event);
        window.dispatchEvent(new CustomEvent('location-changed'));
      }
    });
  </script>
</dom-module>
